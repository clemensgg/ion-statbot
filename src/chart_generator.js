import puppeteer from 'puppeteer';
import { cacheGet } from './cache.js';
import {
	formatFloat,
	getFloatTextSymbol,
} from './helperfunctions.js'

const cols = {
    deepPurple: "#231d4b",
    purple: "#2d2755",
	yellow: "#fbc02d",
	white: "#ffffff",
	grey: "#c3c5cb",
	green: "#52EB7D",
	red: "#ef3456"
}

const chartOptions = {
    grid: {
        vertLines: { visible: false },
        horzLines: { visible: false }
    },
    layout: {
        textColor: "white",
        background: { type: "solid", color: cols.purple },
        fontSize: 12,
        fontFamily: 'sans-serif'
	},
	localization: {
		locale: "en-US"
	},
    width: 600,
    height: 400
}

function getCol(value) {
	if (value.toString().slice(0, 1) == '-') return cols.red;
	else return cols.green;
}

function getMinMove(size) {
	var s = 1 + "";
	let len = s.length;
	while (len < size) {
		s = "0" + s;
		len = s.length;
	}
	return parseFloat('0.' + s);
}

function nFormatter(num) {
	const lookup = [
		{ value: 1e6, symbol: "M" },
		{ value: 1e9, symbol: "B" }
	];
	const rx = /\.0+$|(\.[0-9]*[1-9])0+$/;
	var item = lookup.slice().reverse().find(function (item) {
		return num >= item.value;
	});
	return item ? (num / item.value).toFixed(1).replace(rx, "$1") + item.symbol : "0";
}

function getPriceFormat(value) {
	if (value == 0) value = 0.0000000000001;
	if (value > 10000) return { type: 'price', precision: 0, minMove: 10 }
	else if (value <= 10000 && value > 10) return { type: 'price', precision: 1, minMove: getMinMove(1)  }
	else if (value <= 1) {
		let prec = -Math.floor(Math.log10(value) + 1) + 3;
		return { type: 'price', precision: prec, minMove: getMinMove(prec) }
	}
}

function getCandleChartScript(data) {
    return `const chart = LightweightCharts.createChart(chartdiv, ${JSON.stringify(chartOptions)});
const candlestickSeries = chart.addCandlestickSeries();
candlestickSeries.applyOptions({ priceFormat: ${JSON.stringify(getPriceFormat(data[0].low))} })
candlestickSeries.setData(${JSON.stringify(data)});
chart.timeScale().fitContent();`
}

function getHistogramChartScript(data) {
    return `const chart = LightweightCharts.createChart(chartdiv, ${JSON.stringify(chartOptions)});
const histogramSeries = chart.addHistogramSeries({ color: "${cols.yellow}" });
histogramSeries.applyOptions({ priceFormat: ${JSON.stringify(getPriceFormat(data[0].value))} })
histogramSeries.setData(${JSON.stringify(data)});
chart.timeScale().fitContent();`
}

function getScript(data, type) {
	if (type == 'price' || type == 'p') {
		return getCandleChartScript(data);
	}
	else {
        return getHistogramChartScript(data);
    }
}

async function renderImage(data, type, symbol) {
	let browser = await puppeteer.launch();
    let page = await browser.newPage();
	let script = getScript(data, type);

	let htmlt1 = "Liquidity";
	let htmlt2 = "Volume (24hrs)";
	let htmlt3 = "Price";
	let changeCol1 = cols.white;
	let changeCol2 = cols.white;
	let changeCol3 = cols.white;

	let htmla1 = ""; let htmla2 = ""; let htmla3 = "";
	let htmlc1 = ""; let htmlc2 = ""; let htmlc3 = "";

	let osmoData = await cacheGet('osmosis');
	let lastUpdated = new Date().toLocaleString('en-US');
	let mainval = ""

	if (symbol != 'overview' && symbol != 'o' && symbol != 'osmosis') {
		osmoData.tokens.forEach((token) => {
			if (token.symbol.toLowerCase() == symbol) {
				let prec = 2
				if (token.price < 1) {
					prec = -Math.floor(Math.log10(token.price) + 1) + 3;
                }
				mainval = token.symbol + ': $' + formatFloat(token.price, prec);
				if (type == 'l' || type == 'liquidity') {
					mainval = token.symbol + ' - Liquidity: $' + formatFloat(token.liquidity, 0);
				}
				if (type == 'v' || type == 'volume') {
					mainval = token.symbol + ' - Volume: $' + formatFloat(token.volume_24h, 0);
				}
				htmla1 = '$' + formatFloat(token.liquidity, 0);
				htmla2 = '$' + formatFloat(token.volume_24h, 0);
				htmlc2 = getFloatTextSymbol(token.volume_24h_change) + ' ' + formatFloat(token.volume_24h_change, 1) + "%";
				changeCol2 = getCol(token.volume_24h_change);
				htmla3 = '$' + formatFloat(token.price, prec);
				htmlc3 = getFloatTextSymbol(token.price_24h_change) + ' ' + formatFloat(token.price_24h_change, 1) + "%";
				changeCol3 = getCol(token.price_24h_change);
			}
		});
	}
	else {
		mainval = "Total stats - osmosis.zone - $OSMO"
		htmla1 = "$" + formatFloat(osmoData.metrics.liquidity_usd, 0);
		htmlc1 = getFloatTextSymbol(osmoData.metrics.liquidity_usd_24h) + ' ' + formatFloat(osmoData.metrics.liquidity_usd_24h, 1) + "%";
		changeCol1 = getCol(osmoData.metrics.liquidity_usd_24h);
		htmla2 = '$' + formatFloat(osmoData.metrics.volume_24h, 0);
		htmlc2 = getFloatTextSymbol(osmoData.metrics.volume_24h_change) + ' ' + formatFloat(osmoData.metrics.volume_24h_change, 1) + "%";
		changeCol2 = getCol(osmoData.metrics.volume_24h_change);
		htmlt3 = "";
		htmla3 = "";
		htmlc3 = "";
		if (type == 'l' || type == 'liquidity') {
			mainval = 'Total Liquidity: $' + formatFloat(osmoData.metrics.liquidity_usd, 0);
		}
		if (type == 'v' || type == 'volume') {
			mainval = 'Total Volume: $' + formatFloat(osmoData.metrics.volume_24h, 0);
		}
    }

    let html = `<!doctype html>
<html lang="en">
<head>
<script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
<style>

	body {
		background-color: ${cols.deepPurple};
		margin: 0px !important;
	}

	div#outerdiv {
		display: inline-block;
		padding: 20px 20px 10px 20px;
	}

    div#osmosis{
		display: flex;
		padding: 10px;
	}

	div#osmosislogo{
		width: 30%;
	}

	div#osmosislogo svg {
		width: 100%;
	}

	div#logos {
		display: flex;
		padding: 15px 10px 0px 10px;
	}

	div#imperator svg {
		width: 150px;
	}

	div#cryptocrew svg {
		width: 150px;
	}

	div#imperator {
		width: 75%;
	}

	div#cryptocrew {
		width: 25%;
	}

	div#containerdiv {
		display: flex;
		gap: 8px;
	}

	div#infodiv {
		display: inline-block;
		padding:20px 60px 20px 20px;
		border-radius: 10px;
		background-color: ${cols.purple};
	}

	div#chartdiv {
		display: inline-block;
		padding:20px 20px 20px 20px;
		border-radius: 10px;
		background-color: ${cols.purple};

	}

	div#tv-lightweight-charts{
		overflow:visible !important;
	}

	p#currentprice {
		color: ${cols.white};
		margin: 4px 0;
		font-size: 32px;
		font-variant-numeric: tabular-nums;
		font-family: "Inter",sans-serif !important;
	}

	p#currentdate {
		color: ${cols.grey};
		font-size: 12px;
		font-family: "Inter",sans-serif !important;
	}

	p.headline{
		margin: 0px;
		padding: 0px;
		font-weight: 600;
		color: ${cols.grey};
		font-size: 16px;
		font-variant-numeric: tabular-nums;
		font-family: "Inter",sans-serif !important;
	}

	p.amount{
		margin: 0px;
		padding-top: 10px;
		color: ${cols.white};
		font-size: 1.5rem;
		font-variant-numeric: tabular-nums;
		font-family: "Inter",sans-serif !important;
	}

	p#perc1{
		margin: 0px;
		padding-bottom: 60px;
		color: ${changeCol1};
		font-size: 1.2rem;
		font-variant-numeric: tabular-nums;
		font-family: "Inter",sans-serif !important;
	}

	p#perc2{
		margin: 0px;
		padding-bottom: 60px;
		color: ${changeCol2};
		font-size: 1.2rem;
		font-variant-numeric: tabular-nums;
		font-family: "Inter",sans-serif !important;
	}

	p#perc3{
		margin: 0px;
		padding-bottom: 60px;
		color: ${changeCol3};
		font-size: 1.2rem;
		font-variant-numeric: tabular-nums;
		font-family: "Inter",sans-serif !important;
	}

	p#osmosiszone {
		width: 70%;
		padding-left: 40px;
		margin-top: 10px;
		display: block;
		margin-block-start: 1em;
		margin-block-end: 1em;
		margin-inline-start: 0px;
		margin-inline-end: 0px;
		font-family: "Inter",sans-serif !important;
		font-size: 24px;
		color: #e1c4ff;
	}

</style>
</head>

<body>
<div id="outerdiv">
<div id="osmosis">
	<div id="osmosislogo">
		<svg id="a099498f-d58e-44b3-b13f-225da66468a5" data-name="Ebene 1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 124.24 32.851"><defs><style>.a4357a51-a781-4f90-9514-8c6166e3f095,.bf2a4dc3-d63d-4214-8d3b-1c6403f2cebf,.ef57a741-bb57-4c37-9793-7c7426571535{fill:#fff;}.baabf814-6407-40a1-9139-7f67301cd821{fill:#5e12a0;}.a1ee6d51-9759-4991-a482-8f38a16a7e93{fill:url(#b53da62f-c51a-44ec-b2a0-5fec29cea2f3);}.fb2c7bdb-8d9c-4f5f-a08f-084ea47969b3{fill:url(#ace7633a-00b8-4225-a6c0-d4a035cd27c8);}.b3fea03f-c231-4516-b8dc-03065c6d064e{fill:#a98698;}.a00b84b0-d046-41f8-a816-45e2ed708405,.a80b8ee7-c9fa-40cb-af1a-d36bbe290340,.ab0abe48-d36f-44c9-a527-c0fdc178d5f6,.b3fea03f-c231-4516-b8dc-03065c6d064e,.b4fe5826-feb9-4f3f-8793-4cf37c0e472e,.b976d304-0028-43fb-8186-12815310658e,.bb1c5448-b4f7-421a-909f-d4d03549a00f,.bcdf84b3-fe67-488d-8a2d-e5e5a154c6f9,.bf229821-4e08-4177-aa73-13eb0a7106bf,.e14c9465-b463-43b9-8b16-ed1bcea487c7,.f9cfa50d-8b1c-452d-9df4-48b9fa1e9709,.ffb81167-99d0-48d3-8228-fb71f43f354c{opacity:0.6;}.a00b84b0-d046-41f8-a816-45e2ed708405,.a4357a51-a781-4f90-9514-8c6166e3f095,.a80b8ee7-c9fa-40cb-af1a-d36bbe290340,.ab0abe48-d36f-44c9-a527-c0fdc178d5f6,.b3fea03f-c231-4516-b8dc-03065c6d064e,.b4ccb6fc-7d9c-4b95-aa23-ff60aa29ead4,.b4fe5826-feb9-4f3f-8793-4cf37c0e472e,.bb1c5448-b4f7-421a-909f-d4d03549a00f,.bcdf84b3-fe67-488d-8a2d-e5e5a154c6f9,.bf229821-4e08-4177-aa73-13eb0a7106bf,.bf2a4dc3-d63d-4214-8d3b-1c6403f2cebf,.e14c9465-b463-43b9-8b16-ed1bcea487c7,.f9cfa50d-8b1c-452d-9df4-48b9fa1e9709,.ffb81167-99d0-48d3-8228-fb71f43f354c{isolation:isolate;}.b4fe5826-feb9-4f3f-8793-4cf37c0e472e{fill:url(#b0b256a6-8f83-4431-a438-ff232ee06994);}.ffb81167-99d0-48d3-8228-fb71f43f354c{fill:url(#ae95f5c4-f855-4c25-b177-4de9736396b9);}.ba14d594-267f-400b-a5f2-8f27a4f6a9d9{fill:url(#b46b47e5-4b97-4470-bc23-360c2eee5d07);}.e14c9465-b463-43b9-8b16-ed1bcea487c7{fill:url(#e798624c-2e7e-482d-8485-a141dfb58067);}.b4ccb6fc-7d9c-4b95-aa23-ff60aa29ead4,.b6e27a68-c174-41b1-8e52-253a6ba522b2{opacity:0.7;}.b4ccb6fc-7d9c-4b95-aa23-ff60aa29ead4{fill:url(#a73d627a-f121-4e46-96d0-ab2e0a605b3b);}.b5c66832-c5b2-4920-951a-3a81fb07f065{fill:url(#ac6f58cd-b966-49b5-a872-7e54ff4373e8);}.bcdf84b3-fe67-488d-8a2d-e5e5a154c6f9{fill:url(#b2436946-2acc-48a1-85a0-974e03f5b4de);}.a4357a51-a781-4f90-9514-8c6166e3f095{opacity:0.2;}.beb40b8f-d7c4-4311-87f7-b975e4ba8262{opacity:0.4;}.bf229821-4e08-4177-aa73-13eb0a7106bf{fill:url(#af9130d7-fac4-4378-9472-bb22929df56e);}.bf2a4dc3-d63d-4214-8d3b-1c6403f2cebf{opacity:0.3;}.bb1c5448-b4f7-421a-909f-d4d03549a00f{fill:url(#fbbadfa5-fabe-444b-82af-74ac6df51b62);}.a00b84b0-d046-41f8-a816-45e2ed708405{fill:url(#bccff240-13a1-464c-b8cb-7e7652151dda);}.f9cfa50d-8b1c-452d-9df4-48b9fa1e9709{fill:url(#f53e7b94-9088-4d28-ac7a-6c8f2ed69d6d);}.ab0abe48-d36f-44c9-a527-c0fdc178d5f6{fill:url(#a0e61eff-c2e7-4944-a24d-affc1d50b95e);}.a80b8ee7-c9fa-40cb-af1a-d36bbe290340{fill:url(#a4403ec1-f256-46a4-91b2-9e9dcf154dec);}</style><radialGradient id="b53da62f-c51a-44ec-b2a0-5fec29cea2f3" cx="7.018" cy="1015.732" r="0.744" gradientTransform="matrix(13.245, 0, 0, -13.488, -65.524, 13705.641)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#ffeaff" stop-opacity="0.6"/><stop offset="0.681" stop-color="#a087c9"/><stop offset="1" stop-color="#10002f"/></radialGradient><radialGradient id="ace7633a-00b8-4225-a6c0-d4a035cd27c8" cx="8.151" cy="1018.2" r="0.744" gradientTransform="matrix(32.406, 0, 0, -32.999, -242.196, 33610.007)" xlink:href="#b53da62f-c51a-44ec-b2a0-5fec29cea2f3"/><linearGradient id="b0b256a6-8f83-4431-a438-ff232ee06994" x1="11.745" y1="928.599" x2="15.832" y2="953.36" gradientTransform="matrix(1, 0, 0, -1, 0, 959.66)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#81ffff"/><stop offset="0.62" stop-color="#fff" stop-opacity="0"/></linearGradient><linearGradient id="ae95f5c4-f855-4c25-b177-4de9736396b9" x1="22.588" y1="949.379" x2="12.226" y2="940.043" gradientTransform="matrix(1, 0, 0, -1, 0, 959.66)" gradientUnits="userSpaceOnUse"><stop offset="0.289" stop-color="#fff"/><stop offset="0.78" stop-color="#fff" stop-opacity="0"/></linearGradient><linearGradient id="b46b47e5-4b97-4470-bc23-360c2eee5d07" x1="2.057" y1="935.13" x2="25.497" y2="935.13" gradientTransform="matrix(1, 0, 0, -1, 0, 959.66)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#0002e9"/><stop offset="0.995" stop-color="#ff00c7"/></linearGradient><linearGradient id="e798624c-2e7e-482d-8485-a141dfb58067" x1="26.666" y1="939.975" x2="13.698" y2="927.94" xlink:href="#ae95f5c4-f855-4c25-b177-4de9736396b9"/><linearGradient id="a73d627a-f121-4e46-96d0-ab2e0a605b3b" x1="2.057" y1="935.13" x2="14.582" y2="935.13" gradientTransform="matrix(1, 0, 0, -1, 0, 959.66)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#000292"/><stop offset="0.995" stop-color="#7d00c7"/></linearGradient><linearGradient id="ac6f58cd-b966-49b5-a872-7e54ff4373e8" x1="2.083" y1="939.996" x2="25.476" y2="939.996" gradientTransform="matrix(1, 0, 0, -1, 0, 959.66)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#000292"/><stop offset="0.995" stop-color="#be00c7"/></linearGradient><linearGradient id="b2436946-2acc-48a1-85a0-974e03f5b4de" x1="25.123" y1="952.746" x2="23.397" y2="949.992" xlink:href="#ae95f5c4-f855-4c25-b177-4de9736396b9"/><linearGradient id="af9130d7-fac4-4378-9472-bb22929df56e" x1="12.349" y1="932.239" x2="13.282" y2="932.239" xlink:href="#ae95f5c4-f855-4c25-b177-4de9736396b9"/><linearGradient id="fbbadfa5-fabe-444b-82af-74ac6df51b62" x1="15.566" y1="932.554" x2="16.499" y2="932.554" xlink:href="#ae95f5c4-f855-4c25-b177-4de9736396b9"/><linearGradient id="bccff240-13a1-464c-b8cb-7e7652151dda" x1="14.138" y1="930.929" x2="14.839" y2="930.929" xlink:href="#ae95f5c4-f855-4c25-b177-4de9736396b9"/><linearGradient id="f53e7b94-9088-4d28-ac7a-6c8f2ed69d6d" x1="16.973" y1="931.266" x2="17.674" y2="931.266" xlink:href="#ae95f5c4-f855-4c25-b177-4de9736396b9"/><linearGradient id="a0e61eff-c2e7-4944-a24d-affc1d50b95e" x1="9.335" y1="932.844" x2="10.859" y2="932.844" xlink:href="#ae95f5c4-f855-4c25-b177-4de9736396b9"/><linearGradient id="a4403ec1-f256-46a4-91b2-9e9dcf154dec" x1="18.384" y1="935.381" x2="19.908" y2="935.381" xlink:href="#ae95f5c4-f855-4c25-b177-4de9736396b9"/></defs><path class="ef57a741-bb57-4c37-9793-7c7426571535" d="M33.587,18.805A6.841,6.841,0,0,1,40.7,11.762a6.841,6.841,0,0,1,7.114,7.043A6.841,6.841,0,0,1,40.7,25.848,6.856,6.856,0,0,1,33.587,18.805Zm11.257,0c0-2.556-1.642-4.487-4.143-4.487s-4.117,1.931-4.117,4.487c0,2.53,1.615,4.487,4.117,4.487A4.179,4.179,0,0,0,44.844,18.805Z"/><path class="ef57a741-bb57-4c37-9793-7c7426571535" d="M48.935,23.681,50.5,21.464a6.007,6.007,0,0,0,4.326,1.826c1.589,0,2.371-.731,2.371-1.513,0-2.4-7.843-.757-7.843-5.9,0-2.27,1.954-4.148,5.159-4.148a7.583,7.583,0,0,1,5.316,1.9l-1.616,2.113a5.863,5.863,0,0,0-3.961-1.487c-1.25,0-1.928.548-1.928,1.357,0,2.165,7.817.7,7.817,5.791,0,2.5-1.772,4.382-5.446,4.382A7.607,7.607,0,0,1,48.935,23.681Z"/><path class="ef57a741-bb57-4c37-9793-7c7426571535" d="M73.95,25.611V16.064l-3.831,9.547H68.842l-3.83-9.547v9.547H62.12V11.968h4.065l3.309,8.243L72.8,11.968h4.091V25.585H73.95Z"/><path class="ef57a741-bb57-4c37-9793-7c7426571535" d="M78.9,18.8a7.114,7.114,0,0,1,14.227,0,7.114,7.114,0,0,1-14.227,0Zm11.256,0c0-2.556-1.641-4.486-4.143-4.486S81.9,16.247,81.9,18.8c0,2.531,1.616,4.487,4.117,4.487A4.177,4.177,0,0,0,90.157,18.8Z"/><path class="ef57a741-bb57-4c37-9793-7c7426571535" d="M94.248,23.681l1.564-2.217a6,6,0,0,0,4.325,1.826c1.589,0,2.371-.731,2.371-1.513,0-2.4-7.843-.757-7.843-5.9,0-2.27,1.955-4.148,5.159-4.148a7.583,7.583,0,0,1,5.316,1.9l-1.615,2.113a5.865,5.865,0,0,0-3.961-1.487c-1.251,0-1.929.548-1.929,1.357,0,2.165,7.818.7,7.818,5.791,0,2.5-1.772,4.382-5.446,4.382A7.608,7.608,0,0,1,94.248,23.681Z"/><path class="ef57a741-bb57-4c37-9793-7c7426571535" d="M107.407,25.611V11.968h2.919V25.585h-2.919Z"/><path class="ef57a741-bb57-4c37-9793-7c7426571535" d="M112.1,23.681l1.564-2.217a6,6,0,0,0,4.325,1.826c1.589,0,2.371-.731,2.371-1.513,0-2.4-7.843-.757-7.843-5.9,0-2.27,1.954-4.148,5.16-4.148a7.582,7.582,0,0,1,5.315,1.9l-1.616,2.113a5.86,5.86,0,0,0-3.96-1.487c-1.251,0-1.929.548-1.929,1.357,0,2.165,7.818.7,7.818,5.791,0,2.5-1.772,4.382-5.446,4.382A7.528,7.528,0,0,1,112.1,23.681Z"/><path class="baabf814-6407-40a1-9139-7f67301cd821" d="M28.452,6.981c-.309-1.19-1.3-2.38-3.087-3.7A7.566,7.566,0,0,0,21.2,1.615a3.353,3.353,0,0,0-.683.067,2.005,2.005,0,0,0-1.345,1.123,2.981,2.981,0,0,0-.221,2.268,5.754,5.754,0,0,0,.331.606,8.335,8.335,0,0,1-1.918.943,13.113,13.113,0,0,1,7.166,6l.022-.269a10.571,10.571,0,0,1,.595-2.47,3.3,3.3,0,0,0,.927.135,2.36,2.36,0,0,0,1.962-.944A2.478,2.478,0,0,0,28.452,6.981Z"/><path class="a1ee6d51-9759-4991-a482-8f38a16a7e93" d="M25.277,9.227c2.006.561,2.822-1.011,2.558-2.066-.287-1.055-1.213-2.133-2.845-3.346a6.051,6.051,0,0,0-4.344-1.482c-1.058.225-1.367,1.864-1.1,2.493a5.1,5.1,0,0,0,.683,1.01c-.419.292-.816.516-1.147.719A13.069,13.069,0,0,1,24.2,10.709a11.318,11.318,0,0,1,.574-1.617A2.383,2.383,0,0,1,25.277,9.227Z"/><path class="fb2c7bdb-8d9c-4f5f-a08f-084ea47969b3" d="M13.788,31.232A12.441,12.441,0,0,0,26.115,18.68,12.441,12.441,0,0,0,13.788,6.128,12.441,12.441,0,0,0,1.462,18.68,12.441,12.441,0,0,0,13.788,31.232Z"/><path class="b3fea03f-c231-4516-b8dc-03065c6d064e" d="M26.82,6.128a8.159,8.159,0,0,0-4.785-2.65c-1.323-.314-.97-1.078.64-.92a3.961,3.961,0,0,0-2.029-.225c-1.058.225-1.367,1.864-1.1,2.492a5.1,5.1,0,0,0,.683,1.011,16.843,16.843,0,0,1-1.521.921c.2.089.441.2.727.359A11.594,11.594,0,0,1,21,8.194c-1.235-1.078-.97-1.572.728-2.785a2.445,2.445,0,0,1,2.4.135,9.069,9.069,0,0,1,1.963,1.662L25.078,9.182l.2.067a2.366,2.366,0,0,0,1.543-.022C27.283,8.935,28.5,7.947,26.82,6.128Z"/><path class="baabf814-6407-40a1-9139-7f67301cd821" d="M22.013,4.556a10.167,10.167,0,0,1,1.72.966,12.258,12.258,0,0,1,2.029,1.684,11.943,11.943,0,0,0-1.588,3.435c.155.225.331.449.485.674a18.57,18.57,0,0,1,.772-2.223,1.358,1.358,0,0,0,.309.022,1.251,1.251,0,0,0,.816-.247.919.919,0,0,0,.352-.831A2.608,2.608,0,0,0,25.894,6.42a16.269,16.269,0,0,0-1.808-1.46c-1.9-1.28-3.219-1.639-3.815-1.033a1.148,1.148,0,0,0-.22,1.258c-.706.471-1.3.808-1.7,1.033.264.09.507.2.772.314A19.837,19.837,0,0,0,22.013,4.556Zm4.168,3.211a.613.613,0,0,1,.088.292.38.38,0,0,1-.11.314.769.769,0,0,1-.419.113A5.5,5.5,0,0,1,26.181,7.767ZM20.734,4.421a.657.657,0,0,1,.529-.067c-.22.18-.441.337-.661.494A.446.446,0,0,1,20.734,4.421Z"/><path class="baabf814-6407-40a1-9139-7f67301cd821" d="M13.788,5.387A13.174,13.174,0,0,0,.734,18.68,13.174,13.174,0,0,0,13.788,31.973,13.173,13.173,0,0,0,26.842,18.68,13.187,13.187,0,0,0,13.788,5.387Zm0,25.845A12.432,12.432,0,0,1,1.462,18.68,12.433,12.433,0,0,1,13.788,6.128,12.434,12.434,0,0,1,26.115,18.68,12.447,12.447,0,0,1,13.788,31.232Z"/><path class="b4fe5826-feb9-4f3f-8793-4cf37c0e472e" d="M13.788,31.232A12.441,12.441,0,0,0,26.115,18.68,12.441,12.441,0,0,0,13.788,6.128,12.441,12.441,0,0,0,1.462,18.68,12.441,12.441,0,0,0,13.788,31.232Z"/><path class="b3fea03f-c231-4516-b8dc-03065c6d064e" d="M13.7,29.705A12.625,12.625,0,0,1,7.614,7.834,12.612,12.612,0,0,0,11.8,31.075a12.137,12.137,0,0,0,10.034-2.9A12.169,12.169,0,0,1,13.7,29.705Z"/><path class="ffb81167-99d0-48d3-8228-fb71f43f354c" d="M15.751,6.307a12.124,12.124,0,0,0-8.6,1.8l-.088.09A16.081,16.081,0,0,1,9.4,7.093a11.731,11.731,0,0,0-4.675,4.514c1.39-2.74,5.469-4.671,8.666-4.806s5.292.831,7.85,2.92c2.558,2.11,4.1,6.422,3.947,9.835a13.771,13.771,0,0,1-1.9,6.175,16.4,16.4,0,0,0,2.4-3.952,8.862,8.862,0,0,0,.22-1.1A12.469,12.469,0,0,0,15.751,6.307Z"/><path class="ba14d594-267f-400b-a5f2-8f27a4f6a9d9" d="M25.5,18.568A11.825,11.825,0,0,1,13.788,30.491,11.843,11.843,0,0,1,2.057,18.568Z"/><g class="b976d304-0028-43fb-8186-12815310658e"><path class="e14c9465-b463-43b9-8b16-ed1bcea487c7" d="M24.571,18.568A11.832,11.832,0,0,1,13.325,30.491h.463A11.825,11.825,0,0,0,25.5,18.568Z"/></g><g class="b6e27a68-c174-41b1-8e52-253a6ba522b2"><path class="b4ccb6fc-7d9c-4b95-aa23-ff60aa29ead4" d="M3.711,18.568H2.057A11.825,11.825,0,0,0,13.766,30.491c.287,0,.551,0,.816-.022A11.869,11.869,0,0,1,3.711,18.568Z"/></g><path class="b5c66832-c5b2-4920-951a-3a81fb07f065" d="M25.475,18.68c0-1.37-2.337-2.156-5.446-2.425a18.4,18.4,0,0,0-7.123.853,13.837,13.837,0,0,1-5.755.382c-3.286-.382-5.094-.427-5.094,1.19,0,2.335,4.675,5.254,11.687,4.244,3.55-.517,5.381-1.572,7.475-2.29C23.491,19.87,25.475,19.893,25.475,18.68Z"/><path class="ef57a741-bb57-4c37-9793-7c7426571535" d="M17.625,13.021A2.021,2.021,0,1,0,15.641,11,2,2,0,0,0,17.625,13.021Z"/><path class="ef57a741-bb57-4c37-9793-7c7426571535" d="M20.866,14.526a.854.854,0,1,0-.837-.853A.846.846,0,0,0,20.866,14.526Z"/><g class="b976d304-0028-43fb-8186-12815310658e"><path class="bcdf84b3-fe67-488d-8a2d-e5e5a154c6f9" d="M23.865,9.384h-.044a.265.265,0,0,1-.2-.315A5.173,5.173,0,0,1,24.7,7a.244.244,0,0,1,.353-.023.255.255,0,0,1,.022.359,4.88,4.88,0,0,0-.97,1.842A.238.238,0,0,1,23.865,9.384Z"/></g><path class="a4357a51-a781-4f90-9514-8c6166e3f095" d="M12.974,28.044a.629.629,0,1,0-.618-.629A.623.623,0,0,0,12.974,28.044Z"/><g class="beb40b8f-d7c4-4311-87f7-b975e4ba8262"><path class="bf229821-4e08-4177-aa73-13eb0a7106bf" d="M12.62,27.82a.644.644,0,0,1,0-.9c.044-.045.088-.068.132-.113a.47.47,0,0,0-.221.135.646.646,0,0,0,0,.9.63.63,0,0,0,.75.113A.61.61,0,0,1,12.62,27.82Z"/></g><path class="bf2a4dc3-d63d-4214-8d3b-1c6403f2cebf" d="M13.193,27.235a.135.135,0,1,0-.133-.135A.133.133,0,0,0,13.193,27.235Z"/><path class="a4357a51-a781-4f90-9514-8c6166e3f095" d="M16.193,27.729a.629.629,0,1,0-.617-.628A.623.623,0,0,0,16.193,27.729Z"/><g class="beb40b8f-d7c4-4311-87f7-b975e4ba8262"><path class="bb1c5448-b4f7-421a-909f-d4d03549a00f" d="M15.839,27.505a.644.644,0,0,1,0-.9c.044-.045.088-.067.132-.112a.447.447,0,0,0-.22.135.644.644,0,0,0,0,.9.626.626,0,0,0,.749.112A.606.606,0,0,1,15.839,27.505Z"/></g><path class="bf2a4dc3-d63d-4214-8d3b-1c6403f2cebf" d="M16.412,26.921a.135.135,0,1,0-.132-.135A.134.134,0,0,0,16.412,26.921Z"/><path class="a4357a51-a781-4f90-9514-8c6166e3f095" d="M14.6,29.189a.472.472,0,1,0-.463-.472A.467.467,0,0,0,14.6,29.189Z"/><g class="beb40b8f-d7c4-4311-87f7-b975e4ba8262"><path class="a00b84b0-d046-41f8-a816-45e2ed708405" d="M14.34,29.01a.494.494,0,0,1,0-.674c.022-.022.066-.045.088-.067a.392.392,0,0,0-.155.112.5.5,0,0,0,0,.674.46.46,0,0,0,.574.067A.473.473,0,0,1,14.34,29.01Z"/></g><path class="bf2a4dc3-d63d-4214-8d3b-1c6403f2cebf" d="M14.758,28.56a.09.09,0,1,0-.088-.09A.089.089,0,0,0,14.758,28.56Z"/><path class="a4357a51-a781-4f90-9514-8c6166e3f095" d="M17.449,28.852a.472.472,0,1,0-.463-.472A.468.468,0,0,0,17.449,28.852Z"/><g class="beb40b8f-d7c4-4311-87f7-b975e4ba8262"><path class="f9cfa50d-8b1c-452d-9df4-48b9fa1e9709" d="M17.184,28.673a.5.5,0,0,1,0-.674c.022-.022.066-.045.088-.067a.389.389,0,0,0-.154.112.5.5,0,0,0,0,.674.457.457,0,0,0,.573.067A.472.472,0,0,1,17.184,28.673Z"/></g><path class="bf2a4dc3-d63d-4214-8d3b-1c6403f2cebf" d="M17.6,28.223a.09.09,0,1,0-.088-.089A.088.088,0,0,0,17.6,28.223Z"/><path class="a4357a51-a781-4f90-9514-8c6166e3f095" d="M10.348,27.819a1.033,1.033,0,1,0-1.014-1.033A1.024,1.024,0,0,0,10.348,27.819Z"/><g class="beb40b8f-d7c4-4311-87f7-b975e4ba8262"><path class="ab0abe48-d36f-44c9-a527-c0fdc178d5f6" d="M9.775,27.437a1.044,1.044,0,0,1,0-1.459A.819.819,0,0,1,10,25.821a1.18,1.18,0,0,0-.353.224,1.044,1.044,0,0,0,0,1.46.989.989,0,0,0,1.235.157A.97.97,0,0,1,9.775,27.437Z"/></g><path class="bf2a4dc3-d63d-4214-8d3b-1c6403f2cebf" d="M10.7,26.472a.225.225,0,1,0-.22-.225A.223.223,0,0,0,10.7,26.472Z"/><path class="a4357a51-a781-4f90-9514-8c6166e3f095" d="M19.412,25.282A1.033,1.033,0,1,0,18.4,24.249,1.024,1.024,0,0,0,19.412,25.282Z"/><g class="beb40b8f-d7c4-4311-87f7-b975e4ba8262"><path class="a80b8ee7-c9fa-40cb-af1a-d36bbe290340" d="M18.816,24.9a1.044,1.044,0,0,1,0-1.46.8.8,0,0,1,.22-.157,1.178,1.178,0,0,0-.352.225,1.043,1.043,0,0,0,0,1.459.988.988,0,0,0,1.234.158A.977.977,0,0,1,18.816,24.9Z"/></g><path class="bf2a4dc3-d63d-4214-8d3b-1c6403f2cebf" d="M19.764,23.934a.225.225,0,1,0-.221-.224A.222.222,0,0,0,19.764,23.934Z"/></svg>
	</div>
	<p id="osmosiszone">osmosis.zone</p>
</div>
<div id="containerdiv">
<div id="infodiv">
	<div id="liquidity">
		<p class="headline">${htmlt1}</p>
		<p class="amount">${htmla1}</p>
		<p id="perc1">${htmlc1}</p>
	</div>
	<div id="volume">
		<p class="headline">${htmlt2}</p>
		<p class="amount">${htmla2}</p>
		<p id="perc2">${htmlc2}</p>
	</div>
	<div id="price">
		<p class="headline">${htmlt3}</p>
		<p class="amount">${htmla3}</p>
		<p id="perc3">${htmlc3}</p>
	</div>
</div>
<div id="chartdiv">
<div id="priceinfo">
	<p id="currentprice"> ${mainval} </p>
	<p id="currentdate"> ${lastUpdated}</p>
</div>

<script type="text/javascript">
${script}
</script>
</div>
</div>

<div id="logos">
<div id="cryptocrew">
<svg id="ff41e6ae-1303-4cd0-a6af-e1e50952c0c4" data-name="Ebene 1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 30"><defs><style>.e94d47b2-0fc7-4d2b-97f7-ab916b909cef{fill:#fff;}.e81450d8-088e-45bf-843c-0ad68c376cde{fill:#1d202b;}.bc5b0d43-5104-41f2-ba81-39336e9eafb8{fill:url(#b180b1bb-4e33-47d7-a334-492c6d05f492);}.befc1ff6-5e7f-4f6c-b2d3-49cd1061bfee{fill:url(#b13fd8c0-6985-4f82-844b-811a3d418254);}.a80d074b-c82f-4d5c-9301-9876b0a90e71{fill:url(#ef9c61a1-0233-417f-b3e7-78b632aab1f3);}.a66a14e7-5094-4099-9400-4a02fedcb882{fill:url(#fa4dbe6c-f1cc-4399-9d47-b403a808f0de);}</style><linearGradient id="b180b1bb-4e33-47d7-a334-492c6d05f492" x1="-3200.554" y1="13105.609" x2="-3200.554" y2="13095.125" gradientTransform="translate(-3185.131 13110.936) rotate(180)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#19da9d"/><stop offset="0.33" stop-color="#01cad7"/><stop offset="0.66" stop-color="#018fc3"/><stop offset="1" stop-color="#005cae"/><stop offset="1" stop-color="#2580ba" stop-opacity="0.2"/></linearGradient><linearGradient id="b13fd8c0-6985-4f82-844b-811a3d418254" x1="-3196.006" y1="13101.827" x2="-3196.006" y2="13091.344" xlink:href="#b180b1bb-4e33-47d7-a334-492c6d05f492"/><linearGradient id="ef9c61a1-0233-417f-b3e7-78b632aab1f3" x1="-3205.105" y1="13101.827" x2="-3205.105" y2="13091.344" xlink:href="#b180b1bb-4e33-47d7-a334-492c6d05f492"/><linearGradient id="fa4dbe6c-f1cc-4399-9d47-b403a808f0de" x1="-3200.557" y1="13098.045" x2="-3200.557" y2="13087.562" xlink:href="#b180b1bb-4e33-47d7-a334-492c6d05f492"/></defs><circle class="e94d47b2-0fc7-4d2b-97f7-ab916b909cef" cx="15.425" cy="15" r="15"/><circle class="e81450d8-088e-45bf-843c-0ad68c376cde" cx="15.425" cy="15" r="13"/><path class="bc5b0d43-5104-41f2-ba81-39336e9eafb8" d="M17.949,13.635l0,0a14.356,14.356,0,0,0,1.069-.981.06.06,0,0,0,.012-.011,12.938,12.938,0,0,0,.939-1.063C17.225,10.16,15.425,7.834,15.425,5.2v0c0,2.631-1.8,4.959-4.551,6.376A14.271,14.271,0,0,0,13.7,14.271a16.7,16.7,0,0,0,1.725,1.089h0A17.023,17.023,0,0,0,17.949,13.635Z"/><path class="befc1ff6-5e7f-4f6c-b2d3-49cd1061bfee" d="M13.4,17.417l0,0a14.385,14.385,0,0,0,1.069-.982.029.029,0,0,0,.013-.012,12.936,12.936,0,0,0,.939-1.061c-2.748-1.418-4.549-3.744-4.549-6.373v0c0,2.631-1.8,4.959-4.55,6.377a14.291,14.291,0,0,0,2.825,2.693,17.089,17.089,0,0,0,1.725,1.088h0A16.867,16.867,0,0,0,13.4,17.417Z"/><path class="a80d074b-c82f-4d5c-9301-9876b0a90e71" d="M22.5,17.417l0,0a14.189,14.189,0,0,0,1.069-.982.029.029,0,0,0,.013-.012,12.752,12.752,0,0,0,.939-1.061c-2.747-1.418-4.548-3.744-4.548-6.373v0c0,2.631-1.8,4.959-4.551,6.377a14.318,14.318,0,0,0,2.825,2.693,16.993,16.993,0,0,0,1.726,1.088h0A16.867,16.867,0,0,0,22.5,17.417Z"/><path class="a66a14e7-5094-4099-9400-4a02fedcb882" d="M17.952,21.2l0,0a14.384,14.384,0,0,0,1.07-.982l.012-.011a13.128,13.128,0,0,0,.939-1.063c-2.749-1.417-4.548-3.742-4.548-6.372v0c0,2.631-1.8,4.959-4.552,6.376a14.333,14.333,0,0,0,2.826,2.7,17.058,17.058,0,0,0,1.726,1.088h0A16.905,16.905,0,0,0,17.952,21.2Z"/><path class="e94d47b2-0fc7-4d2b-97f7-ab916b909cef" d="M43.793,15.332h.715v.385l-2.53,7.314H40.933L38.4,15.717v-.385h.715l2.31,6.929h.055Z"/><path class="e94d47b2-0fc7-4d2b-97f7-ab916b909cef" d="M45.485,23.031H44.77v-.385l2.64-7.314h1.045l2.64,7.314v.385H50.38L49.665,21H46.2ZM47.96,16.1h-.055l-1.54,4.289H49.5Z"/><path class="e94d47b2-0fc7-4d2b-97f7-ab916b909cef" d="M53.173,15.332v7.094h4.069v.605H52.4v-7.7Z"/><path class="e94d47b2-0fc7-4d2b-97f7-ab916b909cef" d="M59.155,15.332v7.7h-.77v-7.7Z"/><path class="e94d47b2-0fc7-4d2b-97f7-ab916b909cef" d="M61.233,15.332h3.575a1.609,1.609,0,0,1,1.815,1.649v4.4a1.609,1.609,0,0,1-1.815,1.65H61.233ZM62,22.426h2.805a1.011,1.011,0,0,0,1.045-1.045v-4.4a1.011,1.011,0,0,0-1.045-1.044H62Z"/><path class="e94d47b2-0fc7-4d2b-97f7-ab916b909cef" d="M68.371,23.031h-.715v-.385l2.64-7.314h1.045l2.639,7.314v.385h-.715L72.55,21H69.086ZM70.846,16.1H70.79l-1.539,4.289h3.134Z"/><path class="e94d47b2-0fc7-4d2b-97f7-ab916b909cef" d="M77.213,23.031h-.77V15.937h-2.42v-.6h5.61v.385l-.22.22h-2.2Z"/><path class="e94d47b2-0fc7-4d2b-97f7-ab916b909cef" d="M82.316,23.141a1.609,1.609,0,0,1-1.815-1.65V16.872a1.61,1.61,0,0,1,1.815-1.651H84.3a1.61,1.61,0,0,1,1.815,1.651v4.619a1.609,1.609,0,0,1-1.815,1.65Zm1.98-.6a1.011,1.011,0,0,0,1.045-1.045V16.872A1.011,1.011,0,0,0,84.3,15.827h-1.98a1.011,1.011,0,0,0-1.045,1.045v4.619a1.011,1.011,0,0,0,1.045,1.045Z"/><path class="e94d47b2-0fc7-4d2b-97f7-ab916b909cef" d="M91.433,15.332a1.609,1.609,0,0,1,1.815,1.649V18.3a1.625,1.625,0,0,1-1.54,1.6c.627.913,1.232,1.859,1.87,2.75v.385h-.715l-1.98-3.08h-2.09v3.08h-.77v-7.7Zm-2.64.6v3.409h2.64A1.011,1.011,0,0,0,92.478,18.3v-1.32a1.011,1.011,0,0,0-1.045-1.044Z"/><path class="e94d47b2-0fc7-4d2b-97f7-ab916b909cef" d="M95.49,17.586a.954.954,0,0,0,.825.936l2.31.549A1.545,1.545,0,0,1,100,20.666v.715a1.609,1.609,0,0,1-1.815,1.65H94.72v-.605h3.465a1.011,1.011,0,0,0,1.045-1.045v-.715a.953.953,0,0,0-.825-.935l-2.31-.55a1.545,1.545,0,0,1-1.375-1.6v-.6a1.609,1.609,0,0,1,1.815-1.649H99.67v.385l-.22.22H96.535a1.011,1.011,0,0,0-1.045,1.044Z"/><path class="e94d47b2-0fc7-4d2b-97f7-ab916b909cef" d="M39.982,6.836h2.862v.346l-.2.2H39.982a.907.907,0,0,0-.937.937v3.947a.908.908,0,0,0,.937.938h2.862v.543H39.982a1.443,1.443,0,0,1-1.628-1.481V8.316A1.443,1.443,0,0,1,39.982,6.836Z"/><path class="e94d47b2-0fc7-4d2b-97f7-ab916b909cef" d="M47.175,6.836A1.443,1.443,0,0,1,48.8,8.316V9.5a1.458,1.458,0,0,1-1.382,1.431c.563.819,1.106,1.668,1.678,2.467v.346h-.641l-1.777-2.763H44.806v2.763h-.69V6.836Zm-2.369.543v3.059h2.369a.908.908,0,0,0,.937-.938V8.316a.907.907,0,0,0-.937-.937Z"/><path class="e94d47b2-0fc7-4d2b-97f7-ab916b909cef" d="M52.413,10.734h.06l1.993-3.9h.641v.346l-2.319,4.391v2.171H52.1V11.573L49.779,7.182V6.836h.641Z"/><path class="e94d47b2-0fc7-4d2b-97f7-ab916b909cef" d="M59.29,6.836a1.443,1.443,0,0,1,1.628,1.48V9.9a1.443,1.443,0,0,1-1.628,1.48H56.922v2.369h-.691V6.836Zm-2.368.543v3.453H59.29a.907.907,0,0,0,.938-.937V8.316a.908.908,0,0,0-.938-.937Z"/><path class="e94d47b2-0fc7-4d2b-97f7-ab916b909cef" d="M64.558,13.744h-.69V7.379H61.7V6.836h5.032v.346l-.2.2H64.558Z"/><path class="e94d47b2-0fc7-4d2b-97f7-ab916b909cef" d="M69.136,13.842a1.443,1.443,0,0,1-1.628-1.48V8.218a1.444,1.444,0,0,1,1.628-1.481h1.776A1.444,1.444,0,0,1,72.54,8.218v4.144a1.443,1.443,0,0,1-1.628,1.48Zm1.776-.542a.908.908,0,0,0,.938-.938V8.218a.908.908,0,0,0-.938-.938H69.136a.907.907,0,0,0-.937.938v4.144a.907.907,0,0,0,.937.938Z"/><path class="e94d47b2-0fc7-4d2b-97f7-ab916b909cef" d="M75.737,6.836H78.6v.346l-.2.2H75.737a.908.908,0,0,0-.938.937v3.947a.908.908,0,0,0,.938.938H78.6v.543H75.737a1.444,1.444,0,0,1-1.629-1.481V8.316A1.443,1.443,0,0,1,75.737,6.836Z"/><path class="e94d47b2-0fc7-4d2b-97f7-ab916b909cef" d="M82.929,6.836a1.443,1.443,0,0,1,1.628,1.48V9.5a1.457,1.457,0,0,1-1.381,1.431c.562.819,1.105,1.668,1.677,2.467v.346h-.641l-1.776-2.763H80.561v2.763H79.87V6.836Zm-2.368.543v3.059h2.368a.908.908,0,0,0,.938-.938V8.316a.908.908,0,0,0-.938-.937Z"/><path class="e94d47b2-0fc7-4d2b-97f7-ab916b909cef" d="M86.273,6.836h4.441v.346l-.2.2H86.964V9.945h2.911v.542H86.964V13.2h3.75v.543H86.273Z"/><path class="e94d47b2-0fc7-4d2b-97f7-ab916b909cef" d="M95.587,8.612,93.86,13.744h-.937l-1.48-6.562V6.836h.641l1.332,6.217h.05c.562-1.687,1.114-3.434,1.677-5.131h.937c.563,1.7,1.115,3.444,1.678,5.131h.049l1.332-6.217h.642v.346L98.3,13.744h-.938L95.636,8.612Z"/></svg>

</div>
<div id="imperator">
<svg id="bb77e289-57dc-4009-8471-ce6bc06038b3" data-name="Ebene 1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 100 30"><defs><style>.ec19c6d4-eeef-469c-bbc6-510f807ae3a8{fill:none;}.b34031c0-2c3b-4bcf-9488-34ae305e2eaf{fill:#fff;}.f47886fe-0d1a-4fcf-be74-3ae2eb4906cd{clip-path:url(#e39494d8-c76f-4523-9325-8d88aeea8f78);}.a1cd2d9a-795c-4337-95d7-4dc9cfdddffd{fill:#fdfcfc;}.be1a6807-ec3e-498c-9144-dc851f301e86{fill:#e73439;}.b1175344-57a0-4e76-b52f-330caa84b815{fill:#9d1d21;}.e2bafe8a-29b6-4a99-8543-ee7f0db7348f{fill:#c02027;}.be07e15d-d11e-4544-9735-003be293d633{fill:#aa8654;}.b5a6d112-15a9-4581-9991-c63b8f9155a4{fill:#c3a06c;}</style><clipPath id="e39494d8-c76f-4523-9325-8d88aeea8f78"><circle class="ec19c6d4-eeef-469c-bbc6-510f807ae3a8" cx="15.835" cy="15" r="12.097"/></clipPath></defs><circle class="b34031c0-2c3b-4bcf-9488-34ae305e2eaf" cx="15.835" cy="15" r="15"/><g class="f47886fe-0d1a-4fcf-be74-3ae2eb4906cd"><path class="a1cd2d9a-795c-4337-95d7-4dc9cfdddffd" d="M27.926,15q0,5.925.006,11.849c0,.207-.041.248-.248.248q-11.849-.011-23.7,0c-.207,0-.248-.041-.248-.248q.01-11.849,0-23.7c0-.207.041-.248.248-.248q11.848.01,23.7,0c.207,0,.248.041.248.248Q27.92,9.076,27.926,15ZM20.564,25.976c.056-.021.114-.039.169-.063A11.964,11.964,0,0,0,26.6,9.831,11.088,11.088,0,0,0,24.66,7c-.022-.095-.1-.148-.161-.213a11.371,11.371,0,0,0-1.791-1.546A11.692,11.692,0,0,0,14.09,3.186,11.554,11.554,0,0,0,6.9,7.07a11.464,11.464,0,0,0-3.011,7.368,11.761,11.761,0,0,0,4.57,9.985,12.047,12.047,0,0,0,3.189,1.788,7.3,7.3,0,0,0,1.885.513,7.309,7.309,0,0,0,1.694.239,11.182,11.182,0,0,0,2.431-.134A10.669,10.669,0,0,0,20.564,25.976Z"/><path class="be1a6807-ec3e-498c-9144-dc851f301e86" d="M13.533,26.723a7.262,7.262,0,0,1-1.885-.512,12.047,12.047,0,0,1-3.189-1.788,11.761,11.761,0,0,1-4.57-9.985A11.464,11.464,0,0,1,6.9,7.07a11.554,11.554,0,0,1,7.19-3.884,11.692,11.692,0,0,1,8.618,2.055A11.371,11.371,0,0,1,24.5,6.787c.061.065.139.118.161.213-.068.095-.125,0-.179-.017-.475-.186-.916-.446-1.4-.612a13.118,13.118,0,0,0-3.348-.618c-.573-.04-1.142.068-1.714.065-.294.057-.587.119-.882.17a10.986,10.986,0,0,0-2.639.871,9.94,9.94,0,0,1-1.251.637,4.138,4.138,0,0,1,.37-1.513.452.452,0,0,1,.294-.272,11.627,11.627,0,0,1,3.848-.673h.393A10.111,10.111,0,0,0,6.57,10.484,10.163,10.163,0,0,0,9.193,22.833,10.475,10.475,0,0,1,9.208,8.972a2.87,2.87,0,0,0,.736,1.337.949.949,0,0,0-.077-.484A5.224,5.224,0,0,1,9.714,8.6a.476.476,0,0,1,.15-.375A11.4,11.4,0,0,1,12.8,6.176c.186-.091.221-.034.208.15a3.961,3.961,0,0,0,.132,1.286A12.415,12.415,0,0,0,10.192,10.5a12.543,12.543,0,0,0-1.321,2.4,10.033,10.033,0,0,0-.759,3.229A11.443,11.443,0,0,0,8.39,19.68a13.57,13.57,0,0,0,.831,2.272,10.642,10.642,0,0,0,2.016,2.916A11.014,11.014,0,0,0,13.533,26.723Z"/><path class="b1175344-57a0-4e76-b52f-330caa84b815" d="M18.016,5.818c.572,0,1.141-.1,1.714-.065a13.118,13.118,0,0,1,3.348.618c.487.166.928.426,1.4.612.054.021.111.112.179.017A11.088,11.088,0,0,1,26.6,9.831a11.964,11.964,0,0,1-5.871,16.082c-.055.024-.113.042-.169.063-.018-.023-.035-.067-.053-.068a.149.149,0,0,1-.153-.191c.064-.142.147-.033.234.016s.216.12.29-.046l-.684-.352c.219-.115.219-.115-.006-.28.254,0,.311-.164.384-.333.041-.1.171-.19.024-.269a.218.218,0,0,0-.321.114c-.061.121-.135.282-.333.227-.021-.087.112-.115.073-.229l-.409.158.013.07h.323c-.035.171-.146.11-.253.09-.134-.026-.322-.149-.39-.067-.179.216-.376.085-.565.1.216-.081.43-.165.647-.242A10.333,10.333,0,0,0,26.111,15.7a10.2,10.2,0,0,0-1.948-6.723A10.487,10.487,0,0,0,21.015,6.11c-.223-.135-.313-.15-.409.139-.426,1.289-.883,2.567-1.322,3.851-.058.169-.106.245-.3.152A7.116,7.116,0,0,0,16.8,9.669c-.1-.247-.378,0-.529-.2a1.4,1.4,0,0,1,.514-.031c.194.008.418-.084.544.193.037.081.281.114.3-.065.03-.26.1-.558-.121-.773a.738.738,0,0,1-.225-.653.415.415,0,0,0-.213-.458c-.156-.079-.151-.214-.152-.358s.036-.318-.105-.451c-.075-.07-.274-.118-.155-.266s.05-.426.388-.462c.226-.024.459-.095.7-.1A.261.261,0,0,0,18.016,5.818Z"/><path class="e2bafe8a-29b6-4a99-8543-ee7f0db7348f" d="M18.016,5.818a.261.261,0,0,1-.27.233c-.238,0-.471.073-.7.1-.338.036-.266.311-.388.462s.08.2.155.266c.141.133.105.295.105.451s0,.279.152.358a.415.415,0,0,1,.213.458.738.738,0,0,0,.225.653c.226.215.151.513.121.773-.02.179-.264.146-.3.065-.126-.277-.35-.185-.544-.193a1.4,1.4,0,0,0-.514.031c.151.2.428-.05.529.2-.161,0-.322,0-.482-.007a6.584,6.584,0,0,0-3.189.664,7.655,7.655,0,0,0-4.51,7.145,8.381,8.381,0,0,0,3.68,7.161,3.538,3.538,0,0,0,1.513.495c.552.1,1.115.139,1.672.205l-.433.022a6.039,6.039,0,0,0,1.508,0c.723-.157,1.462-.235,2.177-.433.189-.015.386.116.565-.1.068-.082.256.041.39.067.107.02.218.081.253-.09h0c.2.055.272-.106.333-.227a.218.218,0,0,1,.321-.114c.147.079.017.172-.024.269-.073.169-.13.337-.384.333.225.165.225.165.006.28l.684.352c-.074.166-.2.1-.29.046s-.17-.158-.234-.016a.149.149,0,0,0,.153.191c.018,0,.035.045.053.068a10.669,10.669,0,0,1-2.906.853,11.182,11.182,0,0,1-2.431.134,7.309,7.309,0,0,1-1.694-.239,11.05,11.05,0,0,1-2.3-1.856,10.642,10.642,0,0,1-2.016-2.916A13.57,13.57,0,0,1,8.39,19.68a11.443,11.443,0,0,1-.278-3.549A10.033,10.033,0,0,1,8.871,12.9a12.543,12.543,0,0,1,1.321-2.4,12.415,12.415,0,0,1,2.943-2.888.175.175,0,0,0,.109-.116A9.94,9.94,0,0,0,14.5,6.859a10.986,10.986,0,0,1,2.639-.871C17.429,5.937,17.722,5.875,18.016,5.818Z"/><path class="a1cd2d9a-795c-4337-95d7-4dc9cfdddffd" d="M13.244,7.5a.175.175,0,0,1-.109.116A3.961,3.961,0,0,1,13,6.326c.013-.184-.022-.241-.208-.15A11.4,11.4,0,0,0,9.864,8.224a.476.476,0,0,0-.15.375,5.224,5.224,0,0,0,.153,1.226.949.949,0,0,1,.077.484,2.87,2.87,0,0,1-.736-1.337,10.475,10.475,0,0,0-.015,13.861A10.163,10.163,0,0,1,6.57,10.484,10.111,10.111,0,0,1,18.149,5.038h-.393a11.627,11.627,0,0,0-3.848.673.452.452,0,0,0-.294.272A4.138,4.138,0,0,0,13.244,7.5Z"/><path class="a1cd2d9a-795c-4337-95d7-4dc9cfdddffd" d="M15.486,25.332c-.557-.066-1.12-.107-1.672-.205a3.538,3.538,0,0,1-1.513-.495,8.381,8.381,0,0,1-3.68-7.161,7.655,7.655,0,0,1,4.51-7.145,6.584,6.584,0,0,1,3.189-.664c.16.006.321,0,.482.007a7.116,7.116,0,0,1,2.177.583c.2.093.247.017.3-.152.439-1.284.9-2.562,1.322-3.851.1-.289.186-.274.409-.139a10.487,10.487,0,0,1,3.148,2.865A10.2,10.2,0,0,1,26.111,15.7a10.333,10.333,0,0,1-6.726,8.976c-.217.077-.431.161-.647.242-.715.2-1.454.276-2.177.433Zm3.134-8.658a.182.182,0,0,0-.127-.1,2.373,2.373,0,0,1-.819-1.288c-.047-.168-.054-.284.186-.193a4.805,4.805,0,0,0,1.838.21.269.269,0,0,0,.243.026l.123.012c1.111.207,1.3,1.133,1.532,2.061a8.879,8.879,0,0,0,.166-2.3,4.631,4.631,0,0,0-.178-1.126c-.035-.124-.079-.235-.244-.191l-1.157,0-1.149-.009-.267-.071c.591-.145,1.117-.277,1.645-.4s.536-.164.271-.643c-.024-.043-.054-.084-.081-.126a3.41,3.41,0,0,0-1.564-1.209,6.74,6.74,0,0,0-1.691-.434.4.4,0,0,0-.109-.044,5.477,5.477,0,0,0-3.27.724,5.3,5.3,0,0,0-2.436,3.177.456.456,0,0,0,.007.429,3.8,3.8,0,0,1,1.66-1.086c.062-.018.134-.086.194-.02s0,.13-.031.192a4.182,4.182,0,0,0-.346,1.182c-.094.623.066.9.571,1.025,0,.093.079.1.144.125a4.93,4.93,0,0,1,1.23.739,8.476,8.476,0,0,1,1.965,2.325,2.05,2.05,0,0,0,1.28,1.373c.345.139.67.325,1.011.473a8.6,8.6,0,0,0,2.606.706c.164.015.266.015.193-.221A34.437,34.437,0,0,1,20.9,17.951a.994.994,0,0,0-.831-.851c-.363-.072-.724-.157-1.086-.236l-.243-.114-.064-.046Z"/><path class="e2bafe8a-29b6-4a99-8543-ee7f0db7348f" d="M19.946,24.793h-.323l-.013-.07.409-.158c.039.114-.094.142-.073.229Z"/><path class="b1175344-57a0-4e76-b52f-330caa84b815" d="M15.486,25.332l1.075.017a6.039,6.039,0,0,1-1.508,0Z"/><path class="be07e15d-d11e-4544-9735-003be293d633" d="M20.064,15.344l-.123-.012a.326.326,0,0,0-.243-.026,4.805,4.805,0,0,1-1.838-.21c-.24-.091-.233.025-.186.193a2.373,2.373,0,0,0,.819,1.288c0,.053-.011.118.047.148.041.021.064-.017.08-.051l.057.03.064.046.243.114c-.03.151.06.188.185.208a.12.12,0,0,1,.1.133c-.006.079-.07.088-.132.09a.281.281,0,0,0-.238.093,10.866,10.866,0,0,0-1.043,1.263,2.119,2.119,0,0,1-.538.661,1.325,1.325,0,0,0-.391.341,8.476,8.476,0,0,0-1.965-2.325,4.93,4.93,0,0,0-1.23-.739c-.065-.027-.14-.032-.144-.125.082-.2.161-.41.245-.613a5.114,5.114,0,0,1,1.857-2.326,5.869,5.869,0,0,1,1.631-.8c.226-.068.222-.172.137-.355-.148-.315-.243-.659-.42-.955s-.172-.433.211-.425c.032,0,.066-.067.1-.1a6.74,6.74,0,0,1,1.691.434A3.41,3.41,0,0,1,20.6,12.528c.027.042.057.083.081.126.265.479.246.518-.271.643s-1.054.258-1.645.4l.267.071a1.5,1.5,0,0,0,1.137.067c.011-.01.008-.038.012-.058l1.157,0a1.3,1.3,0,0,0,.095.449c.153.237.029.266-.159.284a.7.7,0,0,0-.057-.369c-.118.224-.352.061-.563.2.24.07.461.022.62.169,0,.124-.02.167-.172.14a.282.282,0,0,0-.341.347c.031.224-.068.318-.253.2C20.277,15.058,20.167,15.153,20.064,15.344Z"/><path class="b5a6d112-15a9-4581-9991-c63b8f9155a4" d="M16.926,19.653a1.325,1.325,0,0,1,.391-.341,2.119,2.119,0,0,0,.538-.661A10.866,10.866,0,0,1,18.9,17.388a.281.281,0,0,1,.238-.093c.062,0,.126-.011.132-.09a.12.12,0,0,0-.1-.133c-.125-.02-.215-.057-.185-.208.362.079.723.164,1.086.236a.994.994,0,0,1,.831.851,34.437,34.437,0,0,0,1.115,4.033c.073.236-.029.236-.193.221a8.6,8.6,0,0,1-2.606-.706c-.341-.148-.666-.334-1.011-.473A2.05,2.05,0,0,1,16.926,19.653Z"/><path class="b5a6d112-15a9-4581-9991-c63b8f9155a4" d="M17.347,10.885c-.033.036-.067.1-.1.1-.383-.008-.39.123-.211.425s.272.64.42.955c.085.183.089.287-.137.355a5.869,5.869,0,0,0-1.631.8,5.114,5.114,0,0,0-1.857,2.326c-.084.2-.163.409-.245.613-.5-.121-.665-.4-.571-1.025a4.182,4.182,0,0,1,.346-1.182c.029-.062.089-.128.031-.192s-.132,0-.194.02a3.8,3.8,0,0,0-1.66,1.086.456.456,0,0,1-.007-.429,5.3,5.3,0,0,1,2.436-3.177,5.477,5.477,0,0,1,3.27-.724A.4.4,0,0,1,17.347,10.885Z"/><path class="b5a6d112-15a9-4581-9991-c63b8f9155a4" d="M21.276,14.517c.188-.018.312-.047.159-.284a1.3,1.3,0,0,1-.095-.449c.165-.044.209.067.244.191a4.631,4.631,0,0,1,.178,1.126,8.879,8.879,0,0,1-.166,2.3c-.235-.928-.421-1.854-1.532-2.061.1-.191.213-.286.446-.14.185.117.284.023.253-.2a.282.282,0,0,1,.341-.347c.152.027.176-.016.172-.14Z"/><path class="b5a6d112-15a9-4581-9991-c63b8f9155a4" d="M20.183,13.78c0,.02,0,.048-.012.058a1.5,1.5,0,0,1-1.137-.067Z"/><path class="b5a6d112-15a9-4581-9991-c63b8f9155a4" d="M18.62,16.674c-.016.034-.039.072-.08.051-.058-.03-.043-.1-.047-.148A.182.182,0,0,1,18.62,16.674Z"/><path class="b5a6d112-15a9-4581-9991-c63b8f9155a4" d="M19.7,15.306a.326.326,0,0,1,.243.026A.269.269,0,0,1,19.7,15.306Z"/><path class="b5a6d112-15a9-4581-9991-c63b8f9155a4" d="M18.741,16.75l-.064-.046Z"/><path class="b5a6d112-15a9-4581-9991-c63b8f9155a4" d="M21.276,14.516c-.159-.147-.38-.1-.62-.169.211-.138.445.025.563-.2a.7.7,0,0,1,.057.369Z"/></g><path class="b34031c0-2c3b-4bcf-9488-34ae305e2eaf" d="M40.765,10v7.522h1.043V10Zm8.977,3.286c.762,0,1.2.513,1.2,1.354v2.883h1.021V14.574c0-1.441-.707-2.26-2.019-2.26a1.981,1.981,0,0,0-1.068.262,1.917,1.917,0,0,0-.75.786,1.638,1.638,0,0,0-.543-.68,1.7,1.7,0,0,0-.825-.314,2.493,2.493,0,0,0-.572-.033,1.833,1.833,0,0,0-1.447.852v-.764H43.718v5.1H44.74V14.77A1.368,1.368,0,0,1,46.2,13.286c.685,0,1.133.5,1.133,1.343v2.893h1.021V14.77A1.363,1.363,0,0,1,49.742,13.286Zm4.878-.862H53.6V20H54.62V16.758a2.094,2.094,0,0,0,.8.667,2.165,2.165,0,0,0,1.031.206,2.624,2.624,0,0,0,1.033-.19,2.585,2.585,0,0,0,.87-.575A2.528,2.528,0,0,0,58.914,16a2.448,2.448,0,0,0,.16-1.012,2.573,2.573,0,0,0-2.625-2.675,2.169,2.169,0,0,0-1.034.224,2.117,2.117,0,0,0-.8.682ZM54.631,15a1.624,1.624,0,0,1,.112-.653,1.643,1.643,0,0,1,.366-.559,1.71,1.71,0,0,1,.56-.376,1.751,1.751,0,0,1,1.334,0,1.714,1.714,0,0,1,.561.376,1.657,1.657,0,0,1,.366.559,1.624,1.624,0,0,1,.112.653,1.543,1.543,0,0,1-.109.644,1.587,1.587,0,0,1-.365.548,1.644,1.644,0,0,1-.56.359,1.8,1.8,0,0,1-1.887-.36,1.628,1.628,0,0,1-.371-.547A1.58,1.58,0,0,1,54.632,15Zm6.477-.426a1.526,1.526,0,0,1,.551-1,1.611,1.611,0,0,1,1.11-.361,1.547,1.547,0,0,1,1.081.368,1.469,1.469,0,0,1,.513,1Zm4.264.382a2.5,2.5,0,0,0-2.6-2.642,2.658,2.658,0,0,0-1.049.177,2.607,2.607,0,0,0-.887.572,2.531,2.531,0,0,0-.577.87,2.469,2.469,0,0,0-.169,1.023,2.494,2.494,0,0,0,.168,1.028,2.529,2.529,0,0,0,.575.878,2.611,2.611,0,0,0,.887.581,2.694,2.694,0,0,0,1.052.188,2.623,2.623,0,0,0,1.41-.331,2.539,2.539,0,0,0,1-1.023c-.281-.12-.605-.207-.875-.328a1.674,1.674,0,0,1-.642.593,1.723,1.723,0,0,1-.861.194,1.636,1.636,0,0,1-1.131-.365,1.55,1.55,0,0,1-.563-1.022H65.36C65.372,15.229,65.372,15.076,65.372,14.956Zm2.319.71c0-1.354.426-2.4,1.436-2.4a1.862,1.862,0,0,1,.774.174l.156-.928a1.992,1.992,0,0,0-.909-.2c-.684,0-1.188.349-1.458,1.255V12.423H66.669v5.1H67.69Zm7.424,1.856h1.01v-5.1h-1.01v.764a2.113,2.113,0,0,0-.8-.666,2.181,2.181,0,0,0-1.035-.209,2.685,2.685,0,0,0-1.041.191,2.619,2.619,0,0,0-.877.577,2.528,2.528,0,0,0-.57.868,2.481,2.481,0,0,0-.169,1.018,2.5,2.5,0,0,0,.17,1.018,2.562,2.562,0,0,0,.569.871,2.658,2.658,0,0,0,.877.58,2.7,2.7,0,0,0,1.041.2,2.2,2.2,0,0,0,1.036-.222,2.138,2.138,0,0,0,.8-.674ZM75.1,14.956a1.639,1.639,0,0,1-.124.648,1.676,1.676,0,0,1-.372.552,1.725,1.725,0,0,1-.562.369,1.761,1.761,0,0,1-1.328,0,1.725,1.725,0,0,1-.562-.369,1.691,1.691,0,0,1-.372-.552,1.639,1.639,0,0,1-.124-.648,1.568,1.568,0,0,1,.114-.645,1.61,1.61,0,0,1,.367-.549A1.673,1.673,0,0,1,72.7,13.4a1.7,1.7,0,0,1,.662-.115,1.735,1.735,0,0,1,.669.112,1.682,1.682,0,0,1,.569.359,1.628,1.628,0,0,1,.377.549A1.584,1.584,0,0,1,75.1,14.956Zm4.143-2.533V10.5H78.226v1.922h-.943v.841h.942v4.26h1.021v-4.26h1.111v-.841Zm4.58,5.208a2.738,2.738,0,0,0,1.064-.184,2.686,2.686,0,0,0,.9-.578,2.6,2.6,0,0,0,.594-.878,2.552,2.552,0,0,0,.189-1.035,2.638,2.638,0,0,0-.818-1.862,2.8,2.8,0,0,0-3.85,0,2.638,2.638,0,0,0-.818,1.862,2.547,2.547,0,0,0,.185,1.034,2.606,2.606,0,0,0,.591.878,2.677,2.677,0,0,0,.9.578A2.706,2.706,0,0,0,83.827,17.631Zm0-.961a1.713,1.713,0,0,1-.676-.118,1.678,1.678,0,0,1-.572-.372,1.648,1.648,0,0,1-.371-.563,1.608,1.608,0,0,1-.108-.661,1.659,1.659,0,0,1,.514-1.174,1.761,1.761,0,0,1,2.427,0,1.659,1.659,0,0,1,.514,1.174,1.615,1.615,0,0,1-.112.659,1.633,1.633,0,0,1-.372.561,1.666,1.666,0,0,1-.569.372A1.73,1.73,0,0,1,83.827,16.67Zm5.127-1c0-1.354.426-2.4,1.436-2.4a1.863,1.863,0,0,1,.774.175l.156-.928a1.986,1.986,0,0,0-.907-.2c-.685,0-1.188.35-1.459,1.256V12.423H87.933v5.1h1.021Z"/></svg>

</div>
</div>
</div>
</body>
</html>`
	await page.setContent(html);

	const elem = await page.$('div#outerdiv');
	const boundingBox = await elem.boundingBox();

	await page.setViewport({ height: parseInt(boundingBox.height), width: parseInt(boundingBox.width) });

    let content = await page.$("body");
    let imageBuffer = await content.screenshot({ omitBackground: true });

    await page.close();
    await browser.close();

	if (imageBuffer) {
		return imageBuffer;
	}
	else return false;
}

async function generateChart(data, type, symbol) {
	// shorten imperator data array to better fit static mobile output
	if ((type == 'p' || type == 'price') && data.length > 135) data.splice(0, data.length - 135);
	const imageBuffer = await renderImage(data, type, symbol);
	if (imageBuffer) {
		return imageBuffer;
	}
	else return false;
}

export {
    generateChart
}